#!/bin/rc
rfork n
print=()
if(~ $1 -p){
	print=1
	shift
}
if(~ $#* 0)
	p=Broken
if not{
	p=$1
	shift
}
psd $p
p=`{psd $p | sed 's/^[^ ]+[ ]+([^ ]+).*/\1/;1q'}
if(~ $#p 0){
	echo no proc $p >[1=2]
	exit noproctohand
}
if(! ~ $#print 0){
	echo lstk'()' | acid -lthread $p
	echo acid -lthread -lpool $* $p
}
if not{
	{echo lstk'()'; cat} | acid -lthread -lpool $* $p
}
